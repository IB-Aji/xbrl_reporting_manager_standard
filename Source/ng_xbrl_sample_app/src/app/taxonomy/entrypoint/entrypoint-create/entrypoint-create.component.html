<nb-card>
  <nb-card-header>{{'taxonomy.taxoSetup.formtitle'| translate}}</nb-card-header>
  <nb-card-body>

    <p-toolbar styleClass="p-mb-4">
      <ng-template pTemplate="left">
        <button pButton label="Submit" pTooltip="Submit to Proceed" icon="pi pi-save" class="p-button-raised p-mr-2"
          (click)="onSubmit($event)"></button>
        <button pButton label="Cancel" pTooltip="Cancel and Back" icon="pi pi-times" class="p-button-raised p-button-warning p-mr-2"
          (click)="redirectTaxonomyEntryPointPage()"></button>
      </ng-template>
    </p-toolbar>
    <p-confirmPopup></p-confirmPopup>

    <div class="p-field">
      <div class="form-group form-group-sm col-sm-12">
        <div class="row" style="margin-bottom: 0.4rem;">
          <label for="taxonomy" class="col-sm-2 col-form-label">{{'taxonomy.taxoSetup.taxonomy'| translate}}</label>
          <div class="col-sm-10">
            <p-dropdown [options]="listOfTaxonomy" [(ngModel)]="selectedTaxonomy" optionLabel="releaseDate"
              (onChange)="onChangeTaxoRelease($event)" placeholder="Select a Taxonomy Release">
            </p-dropdown>
          </div>
        </div>
        <div class="row" style="margin-bottom: 0.4rem;">
          <label for="institution"
            class="col-sm-2 col-form-label">{{'taxonomy.taxoSetup.institution'| translate}}</label>
          <div class="col-sm-10">
            <p-dropdown [options]="listOfInstitution" [(ngModel)]="selectedInstitutionCode" optionLabel="value" optionValue="code" name="selectedInstitution"
              placeholder="Select a Institution">
            </p-dropdown>
          </div>
        </div>
        <div class="row" style="margin-bottom: 0.4rem;">
          <label for="sector" class="col-sm-2 col-form-label">{{'taxonomy.taxoSetup.sector'| translate}}</label>
          <div class="col-sm-10">
            <p-dropdown [options]="listOfSector" [(ngModel)]="selectedSectorCode" optionLabel="value" optionValue="code"
              placeholder="Select a Sector">
            </p-dropdown>
          </div>
        </div>
        <div class="row" style="margin-bottom: 0.4rem;">
          <label for="frequency" class="col-sm-2 col-form-label">{{'taxonomy.taxoSetup.frequency'| translate}}</label>
          <div class="col-sm-10">
            <p-dropdown [options]="listOfFrequency" [(ngModel)]="selectedFrequencyCode" optionLabel="value" optionValue="code"
              placeholder="Select a Frequency Reporting">
            </p-dropdown>
          </div>
        </div>
        <div class="row" style="margin-bottom: 0.4rem;">
          <label for="path" class="col-sm-2 col-form-label">{{'taxonomy.taxoSetup.path'| translate}}</label>
          <div class="col-sm-10">
            <p-dropdown [options]="pathOption" [(ngModel)]="selectedPath" placeholder="Select a Entry Point Path"
              (onChange)="pathSelected($event)">
            </p-dropdown>
          </div>
        </div>

        <p-table #dtTaxonomyForm [value]="formList" [rows]="10" [showCurrentPageReport]="true"
          styleClass="p-datatable-gridlines p-datatable-sm" [paginator]="true" [style]="{width:'85%'}"
          currentPageReportTemplate="Showing {first} to {last} of {totalRecords} Taxonomy Forms">

          <ng-template pTemplate="header">
            <tr>
              <th pSortableColumn="name">
                <div class="p-d-flex p-jc-between p-ai-center">
                  <p-sortIcon field="name"></p-sortIcon>
                  Form Name
                  <p-columnFilter type="text" field="name" display="menu"></p-columnFilter>
                </div>
              </th>
              <th pSortableColumn="entrypointFile" style="width: 25rem;">
                <div class="p-d-flex p-jc-between p-ai-center">
                  <p-sortIcon field="entrypointFile"></p-sortIcon>
                  Entry Point File
                  <p-columnFilter type="text" field="entrypointFile" display="menu"></p-columnFilter>
                </div>
              </th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-form>
            <tr>
              <td>
                {{form.name}}
              </td>
              <td>
                {{form.entrypointFile}}
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="2">No Taxonomy Forms found.</td>
            </tr>
          </ng-template>
        </p-table>

        <div class="row" style="margin-bottom: 50px;"></div>
      </div>
    </div>

  </nb-card-body>
</nb-card>
